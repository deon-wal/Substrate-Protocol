<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALDERSYTH // SPIRE_MONITOR</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        /* --- SPIRE THEME: TEAL / GREEN / CHARCOAL --- */
        :root {
            --bg: #030507;
            --panel: rgba(10, 15, 20, 0.9);
            --teal: #2dd4bf;       /* Structure */
            --green: #39ff14;      /* Contamination */
            --lead: #64748b;       /* Inertia */
            --alert: #ef4444;      /* Critical */
        }

        * { box-sizing: border-box; user-select: none; }
        body { 
            margin: 0; background: var(--bg); color: var(--teal);
            font-family: 'Share Tech Mono', monospace; overflow-x: hidden;
            font-size: 13px;
            /* Spire Background Asset */
            background-image: url('images/image_3b8b83.png'); 
            background-size: cover; background-attachment: fixed;
            background-blend-mode: multiply;
        }

        /* --- PHYSICS SCROLLBAR --- */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--green); box-shadow: 0 0 10px var(--green); }

        /* --- FX LAYERS --- */
        .scanlines {
            position: fixed; inset: 0; pointer-events: none; z-index: 10;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
            background-size: 100% 4px; opacity: 0.7;
        }
        
        /* The "Melon Juice" Leak Effect */
        .bio-layer {
            position: fixed; inset: 0; z-index: 5; pointer-events: none;
            background: url('images/image_3c0f45.jpg'); 
            background-size: cover; mix-blend-mode: color-dodge;
            opacity: 0; transition: opacity 0.2s; filter: hue-rotate(90deg) contrast(1.5);
        }
        .bio-layer.active { opacity: 0.15; animation: pulseBio 0.5s infinite alternate; }
        @keyframes pulseBio { from { opacity: 0.1; } to { opacity: 0.2; } }

        /* --- LAYOUT --- */
        .interface {
            display: grid; grid-template-columns: 300px 1fr 300px;
            padding: 100px 40px; gap: 40px; max-width: 1600px; margin: 0 auto;
            position: relative; z-index: 20;
        }

        /* --- HEADER --- */
        header {
            position: fixed; top: 0; left: 0; width: 100%; height: 70px; z-index: 100;
            background: rgba(2, 5, 8, 0.95); border-bottom: 1px solid var(--teal);
            display: flex; justify-content: space-between; align-items: center; padding: 0 40px;
            backdrop-filter: blur(10px);
        }
        .logo { font-family: 'Rajdhani'; font-size: 1.6rem; font-weight: bold; letter-spacing: 4px; color: #fff; text-shadow: 0 0 10px var(--teal); }
        .nav { display: flex; gap: 30px; }
        .nav a { 
            color: #666; text-decoration: none; font-size: 0.9rem; letter-spacing: 2px; transition: 0.3s; font-weight: bold;
        }
        .nav a:hover { color: #fff; text-shadow: 0 0 8px currentColor; }
        .nav a.active { color: var(--green); border-bottom: 2px solid var(--green); }
        .nav a.root { color: var(--alert); }

        /* --- SIDEBARS --- */
        .sidebar { position: sticky; top: 120px; height: fit-content; display: flex; flex-direction: column; gap: 20px; }
        
        .widget {
            border: 1px solid #222; background: var(--panel); padding: 20px;
            display: flex; flex-direction: column; position: relative;
        }
        .widget::before { content:''; position:absolute; top:0; left:0; width:4px; height:100%; background:var(--teal); }
        .w-title { font-size: 0.7rem; color: #888; margin-bottom: 10px; letter-spacing: 2px; }

        /* Gravity Meter */
        .g-readout { font-size: 3rem; font-family: 'Rajdhani'; font-weight: bold; color: #fff; line-height: 1; }
        .g-graph { display: flex; align-items: flex-end; height: 40px; gap: 2px; margin-top: 10px; }
        .bar { width: 100%; background: var(--teal); opacity: 0.3; transition: height 0.1s; }
        .bar.danger { background: var(--green); opacity: 1; box-shadow: 0 0 8px var(--green); }

        /* --- CENTER CONTENT (NARRATIVE) --- */
        .content-feed { display: flex; flex-direction: column; gap: 30px; perspective: 1000px; }
        
        .log-card {
            background: rgba(5, 5, 8, 0.9); border: 1px solid #333; border-left: 4px solid var(--teal);
            padding: 40px; position: relative; overflow: hidden;
            transition: transform 0.1s; /* For Parallax */
        }
        .log-card h2 { font-family: 'Rajdhani'; font-size: 2rem; margin: 0 0 20px 0; color: #fff; }
        .log-card p { line-height: 1.8; color: #bbb; font-size: 1rem; margin-bottom: 20px; }
        .highlight { color: var(--green); font-weight: bold; }
        
        .log-card:hover { border-color: var(--green); box-shadow: 0 0 30px rgba(57, 255, 20, 0.1); }

        /* 3D CANVAS (Background Tower) */
        #spire-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            opacity: 0.5;
        }

        /* GLITCH TEXT */
        .glitch { animation: glitch 2s infinite; display: inline-block; }
        @keyframes glitch {
            0%, 95% { transform: translate(0,0); }
            96% { transform: translate(-2px, 1px); color: #fff; }
            97% { transform: translate(2px, -1px); color: var(--green); }
            98% { transform: translate(0,0); }
        }

        /* ALERT BANNER */
        .alert-strip {
            background: rgba(57, 255, 20, 0.1); border: 1px solid var(--green);
            color: var(--green); padding: 20px; font-size: 0.9rem; text-align: center;
            margin-bottom: 20px; animation: pulse 2s infinite; letter-spacing: 2px;
        }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        
        /* Action Buttons */
        .action-btn {
            background: transparent; border: 1px solid var(--teal); color: var(--teal);
            padding: 10px; cursor: pointer; margin-top: 5px; font-family: inherit;
            transition: 0.2s; text-transform: uppercase; font-size: 0.8rem; width: 100%;
        }
        .action-btn:hover { background: var(--teal); color: #000; box-shadow: 0 0 15px var(--teal); }

    </style>
</head>
<body>

    <div class="bio-layer" id="bio-fx"></div>
    <div class="scanlines"></div>

    <!-- HEADER -->
    <header>
        <div class="logo">ALDERSYTH // SPIRE</div>
        <nav class="nav">
            <a href="index.html">CORE</a>
            <a href="spire.html" class="active">SPIRE</a>
            <a href="market.html">MARKET</a>
            <a href="residential.html">RESIDENTIAL</a>
            <a href="observatory.html">OBSERVATORY</a>
            <a href="sync.html">SYNC</a>
            <a href="login.html" class="root">_ROOT</a>
        </nav>
    </header>

    <div class="interface">
        
        <!-- LEFT SIDEBAR: PHYSICS ENGINE -->
        <aside class="sidebar">
            <div class="widget">
                <span class="w-title">GRAVITY_WELL_SENSOR</span>
                <div class="g-readout" id="g-val">1.00g</div>
                <div class="g-graph" id="g-graph"></div>
            </div>
            
            <div class="widget">
                <span class="w-title">STRUCTURAL_TENSION</span>
                <div style="display:flex; justify-content:space-between; margin-bottom:5px; color:#fff;">
                    <span>LOAD</span>
                    <span>88%</span>
                </div>
                <div style="width:100%; height:4px; background:#222;">
                    <div style="width:88%; height:100%; background:var(--teal); box-shadow:0 0 10px var(--teal);"></div>
                </div>
            </div>

            <div class="widget" style="border-color:var(--green);">
                <span class="w-title" style="color:var(--green)">ORGANIC_CONTAMINATION</span>
                <div style="color:var(--green); font-size:1.2rem; font-weight:bold;">DETECTED</div>
                <p style="font-size:0.7rem; margin:10px 0 0 0; color:#888;">
                    Warning: <span class="glitch">Sticky threads</span> detected on sector 4 walkways.
                </p>
            </div>
        </aside>

        <!-- CENTER CONTENT: THE LOGS -->
        <main class="content-feed">
            <div class="alert-strip">
                ⚠ CAUTION: METRIC SHIFT IN PROGRESS. WALKWAYS MAY VIBRATE.
            </div>

            <div class="log-card">
                <h2>THE METRIC VARIABLE</h2>
                <p>I am a Structural Analyst. To Aldersyth’s citizens, the city is a marvel of post-gravity engineering. To me, it is a persistent failure of vector alignment. I don’t see ethereal beauty in the Spire District’s walkways.</p>
                <p>I feel a <span class="highlight">twelve-percent gravitational fluctuation</span> in my joints before the alarms even pulse. I carry a three-kilogram lead sphere—a primitive grounding weight in a world unraveling its physics. Every few steps, the sphere surges upward, buoyant for a fleeting moment, then slams into my palm with a bone-deep thud.</p>
            </div>

            <div class="log-card">
                <h2>IMPOSSIBLE PHYSICS</h2>
                <p>To my left, a vendor’s stall has become a scene of impossible physics. A crate of green melons has burst, but the juice doesn’t fall. It traces the building’s exoskeleton in <span class="highlight">sticky, gelatinous threads</span>, pulsing with the HUD overlays Vera forces into my vision.</p>
                <p>Streams hunt microscopic cracks where data-compression stresses the atomic lattice. One fragment swings like a pendulum. I duck instinctively. Pulp splatters my shoulder, cold and sticky, smelling of overripe fruit and ozone.</p>
            </div>

            <div class="log-card">
                <h2>STRIDE CORRECTION</h2>
                <p>I look up at the gantry. <span class="highlight" style="color:#fff;">VERA</span> stands above me. Her black coat doesn’t flutter; air bends around her authority.</p>
                <p>“The stride is wrong, Kael,” she says. “You’re compensating for the 0.8g dip too quickly. Stop being a human participant. I need clean data.”</p>
                <p>My legs move without consent. My stomach lurches as the lead sphere tugs like a defiant beast. I’m folded into the rhythm of the Spire itself.</p>
            </div>
        </main>

        <!-- RIGHT SIDEBAR: CONTROLS -->
        <aside class="sidebar">
            <div class="widget">
                <span class="w-title">MANUAL_OVERRIDE</span>
                <button class="action-btn" onclick="triggerStabilize()">DAMPEN_VIBRATION</button>
                <button class="action-btn" onclick="triggerPurge()" style="border-color:var(--green); color:var(--green);">PURGE_ORGANICS</button>
            </div>

            <div class="widget">
                <span class="w-title">MEMORY_HEAP</span>
                <div id="hex-dump" style="font-size:0.7rem; color:#555; display:grid; grid-template-columns:1fr 1fr; gap:5px;"></div>
            </div>
        </aside>

    </div>

    <!-- 3D BACKGROUND (THE SPIRE) -->
    <canvas id="spire-canvas"></canvas>

    <script>
        // --- 1. GRAVITY SIMULATION ---
        const gVal = document.getElementById('g-val');
        const gGraph = document.getElementById('g-graph');
        
        // Build Graph Bars
        for(let i=0; i<20; i++) {
            let bar = document.createElement('div');
            bar.className = 'bar';
            gGraph.appendChild(bar);
        }

        setInterval(() => {
            // Random Gravity Spikes
            let spike = Math.random() > 0.8;
            let g = 1.0 + (Math.random() - 0.5) * (spike ? 0.4 : 0.05); // 0.8g to 1.2g
            
            gVal.innerText = g.toFixed(2) + "g";
            if(g < 0.9 || g > 1.1) {
                gVal.style.color = "var(--green)";
                gVal.style.textShadow = "0 0 10px var(--green)";
                // Shift screen slightly (The Quiver)
                document.body.style.transform = `translateY(${Math.random()*2}px)`;
                document.getElementById('bio-fx').classList.add('active');
            } else {
                gVal.style.color = "#fff";
                gVal.style.textShadow = "none";
                document.body.style.transform = "none";
                document.getElementById('bio-fx').classList.remove('active');
            }

            // Update Graph
            document.querySelectorAll('.bar').forEach(b => {
                let h = Math.random() * 100;
                b.style.height = h + "%";
                if(spike && h > 80) b.classList.add('danger'); else b.classList.remove('danger');
            });
        }, 100);

        // --- 2. 3D SPIRE MESH (Background) ---
        const canvas = document.getElementById('spire-canvas');
        const renderer = new THREE.WebGLRenderer({canvas, alpha:true});
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        camera.position.z = 5;
        camera.position.y = -2;

        // The Tower
        const geometry = new THREE.CylinderGeometry(1, 2, 8, 8, 20); // Tapered tower
        const material = new THREE.MeshBasicMaterial({ 
            color: 0x2dd4bf, 
            wireframe: true, 
            transparent: true, 
            opacity: 0.15 
        });
        const tower = new THREE.Mesh(geometry, material);
        scene.add(tower);

        function resize() {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        }
        window.addEventListener('resize', resize);
        resize();

        function animate() {
            requestAnimationFrame(animate);
            // Slow rotation
            tower.rotation.y += 0.002;
            
            // "Quiver" effect based on gravity
            let wobble = parseFloat(gVal.innerText) - 1.0;
            tower.position.x = wobble * 0.5;

            renderer.render(scene, camera);
        }
        animate();

        // --- 3. HEX DUMP ---
        const hex = document.getElementById('hex-dump');
        for(let i=0; i<12; i++) {
            let s = document.createElement('div');
            hex.appendChild(s);
        }
        setInterval(() => {
            Array.from(hex.children).forEach(c => {
                c.innerText = Math.floor(Math.random()*0xffffff).toString(16).toUpperCase().padEnd(6,'0');
            });
        }, 100);

        // --- 4. BUTTON ACTIONS ---
        function triggerStabilize() { alert("DAMPENERS ENGAGED. GRAVITY STABILIZING..."); }
        function triggerPurge() { alert("ORGANIC MATTER PURGED."); }

    </script>
</body>
</html>

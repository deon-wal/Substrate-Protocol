<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALDERSYTH // ROOT_HUB</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        /* --- CORE VARIABLES --- */
        :root { 
            --bg: #050505; 
            --panel-bg: rgba(12, 12, 14, 0.95);
            --neon-teal: #2dd4bf; 
            --neon-green: #39ff14;
            --neon-gold: #fbbf24;
            --alert-red: #ef4444;
            --lead-grey: #64748b;
        }
        
        /* --- RESET --- */
        * { box-sizing: border-box; }
        body { 
            background: var(--bg); color: #a3a3a3; 
            font-family: 'Share Tech Mono', monospace; 
            margin: 0; overflow: hidden; font-size: 14px; 
        }
        /* CRT Scanline Effect */
        body::before { 
            content: ""; position: fixed; inset: 0; 
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%); 
            background-size: 100% 4px; pointer-events: none; z-index: 9999; opacity: 0.6; 
        }

        /* --- HEADER (FIXED TOP) --- */
        header { 
            position: fixed; top: 0; left: 0; width: 100%; height: 70px;
            z-index: 1000; background: rgba(5, 5, 5, 0.95); 
            border-bottom: 1px solid rgba(255,255,255,0.1); 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 0 40px; backdrop-filter: blur(5px);
        }
        .logo { 
            color: #fff; font-size: 1.4rem; letter-spacing: 4px; 
            text-shadow: 0 0 10px var(--neon-teal); font-family: 'Rajdhani'; 
        }
        
        /* NAVIGATION LINKS - POINTING TO YOUR REAL FILES */
        .nav { display: flex; gap: 30px; }
        .nav a { 
            color: #666; text-decoration: none; font-size: 0.9rem; letter-spacing: 2px; 
            transition: 0.3s; position: relative; text-transform: uppercase; font-weight: bold;
        }
        .nav a:hover { color: #fff; text-shadow: 0 0 8px currentColor; }
        .nav a.active { color: var(--neon-gold); border-bottom: 1px solid var(--neon-gold); }
        .nav a.root { color: #444; }
        .nav a.root:hover { color: var(--alert-red); text-shadow: 0 0 8px var(--alert-red); }

        /* THE TRIGGER BUTTON */
        .status-badge { 
            font-size: 0.7rem; border: 1px solid var(--alert-red); color: var(--alert-red); 
            padding: 5px 12px; background: rgba(239, 68, 68, 0.1); 
            cursor: pointer; transition: 0.3s; letter-spacing: 1px;
        }
        .status-badge:hover { background: var(--alert-red); color: #000; box-shadow: 0 0 15px var(--alert-red); }

        /* --- MAIN LAYOUT --- */
        .grid-wrapper { 
            display: grid; grid-template-columns: 280px 1fr; gap: 40px; 
            padding: 100px 40px 80px 40px; /* Space for Header/Footer */
            max-width: 1600px; margin: 0 auto; height: 100vh;
            transition: opacity 0.5s;
        }

        /* --- SIDEBAR --- */
        .sidebar { display: flex; flex-direction: column; gap: 15px; }
        .widget { 
            background: var(--panel-bg); border: 1px solid #333; padding: 15px; 
        }
        .widget h4 { 
            margin: 0 0 10px 0; color: var(--neon-gold); font-size: 0.7rem; 
            letter-spacing: 1px; border-bottom: 1px solid #333; padding-bottom: 5px; 
        }
        .data-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.8rem; }
        .bar-graph { display: flex; gap: 2px; height: 30px; align-items: flex-end; margin-top: 10px; }
        .bar { width: 100%; background: var(--neon-teal); opacity: 0.5; transition: height 0.1s; }
        #audio-canvas { width: 100%; height: 50px; }

        /* --- CENTER CONTENT --- */
        main { display: flex; flex-direction: column; gap: 20px; overflow-y: auto; padding-right: 10px; }
        
        /* 3D CONTAINER */
        #viz-container { 
            height: 350px; background: radial-gradient(circle at 50% 50%, #111, #000); 
            border: 1px solid #333; position: relative; 
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; flex-shrink: 0;
            transition: all 0.8s ease-in-out;
        }
        #three-canvas { width: 100%; height: 100%; outline: none; }
        
        .overlay-text { 
            position: absolute; bottom: 20px; right: 20px; text-align: right; pointer-events: none; 
            transition: opacity 0.5s;
        }

        /* COMPACT LOGS */
        .log-entry { 
            border: 1px solid #333; background: rgba(20,20,20,0.4); 
            transition: all 0.3s ease; margin-bottom: 8px; cursor: pointer;
        }
        .log-header { 
            padding: 12px 15px; display: flex; align-items: center; justify-content: space-between; 
            border-left: 3px solid transparent; 
        }
        .log-header:hover { background: rgba(255,255,255,0.05); }
        .log-body { max-height: 0; overflow: hidden; opacity: 0; transition: all 0.4s ease; background: #080808; }
        .log-content { padding: 20px; border-top: 1px solid #333; font-size: 0.85rem; color: #aaa; }
        
        /* Theme Colors for Logs */
        .theme-spire .log-header { border-left-color: var(--neon-teal); }
        .theme-market .log-header { border-left-color: var(--theme-market-rust); }
        .theme-obs .log-header { border-left-color: var(--theme-obs-violet); }
        .log-entry.active .log-body { max-height: 200px; opacity: 1; }

        /* --- FOOTER (FIXED BOTTOM) --- */
        footer { 
            position: fixed; bottom: 0; left: 0; width: 100%; height: 50px;
            background: #080808; border-top: 1px solid #333; 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 0 40px; font-size: 0.75rem; color: #555; z-index: 1000;
            transition: opacity 0.5s;
        }

        /* --- BREACH MODE (HIDDEN) --- */
        body.breach-active header,
        body.breach-active .sidebar,
        body.breach-active .log-stack,
        body.breach-active footer { opacity: 0; pointer-events: none; }

        body.breach-active #viz-container {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 5000; border: none; margin: 0;
            background: radial-gradient(circle at center, transparent 0%, #000 90%);
        }

        .breach-ui {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 6000; text-align: center; opacity: 0; pointer-events: none;
            transition: opacity 1s ease-in;
        }
        body.breach-active .breach-ui { opacity: 1; pointer-events: auto; }

        .mega-title {
            font-family: 'Rajdhani'; font-size: 5rem; color: #fff; 
            text-shadow: 4px 4px 0 var(--alert-red); animation: shake 0.4s infinite;
        }
        .breach-btn {
            display: inline-block; margin-top: 30px;
            border: 2px solid var(--alert-red); color: var(--alert-red);
            padding: 20px 40px; font-size: 1.5rem; text-decoration: none;
            letter-spacing: 3px; font-family: 'Share Tech Mono';
            background: rgba(0,0,0,0.8);
        }
        .breach-btn:hover { background: var(--alert-red); color: #000; box-shadow: 0 0 40px var(--alert-red); }

        @keyframes shake { 0% { transform: translate(0,0); } 25% { transform: translate(-2px, 2px); } 50% { transform: translate(2px, -2px); } 100% { transform: translate(0,0); } }
        
        /* Responsive */
        @media(max-width: 900px) { .grid-wrapper { grid-template-columns: 1fr; } .sidebar { display: none; } }
    </style>
</head>
<body>

    <header>
        <div class="logo">ALDERSYTH // OS</div>
        <nav class="nav">
            <a href="index.html" class="active">CORE</a>
            <a href="spire.html">SPIRE</a>
            <a href="market.html">MARKET</a>
            <a href="residential.html">RESIDENTIAL</a>
            <a href="observatory.html">OBSERVATORY</a>
            <a href="sync.html">SYNC</a>
            <a href="login.html" class="root">_ROOT</a>
        </nav>
        <div class="status-badge" onclick="triggerBreach()">LIVE_FEED_ACTIVE</div>
    </header>

    <div class="grid-wrapper">
        <aside class="sidebar">
            <div class="widget">
                <h4>SYSTEM_CLOCK</h4>
                <div class="data-row"><span>LOCAL_TIME</span> <span id="clock" style="color:#fff">00:00:00</span></div>
            </div>
            
            <div class="widget">
                <h4>EXTERNAL_MARKETS</h4>
                <div class="data-row"><span>BTC/USD</span> <span id="btc-val" style="color:var(--neon-gold)">FETCHING...</span></div>
            </div>

            <div class="widget">
                <h4>DEVICE_STATUS</h4>
                <div class="data-row"><span>BATTERY</span> <span id="batt-val">--%</span></div>
                <div class="data-row"><span>NETWORK</span> <span id="net-val">--</span></div>
            </div>

            <div class="widget">
                <h4>CPU_LOAD</h4>
                <div class="bar-graph" id="cpu-graph"></div>
            </div>
        </aside>

        <main>
            <div id="viz-container">
                <canvas id="three-canvas"></canvas>
                <div class="overlay-text">
                    <span style="font-size:0.7rem; color:#555; display:block;">GRAVITY VARIANCE</span>
                    <span id="g-variance" style="font-size:1.2rem; color:var(--neon-green); font-weight:bold;">1.00g</span>
                </div>
            </div>

            <div class="log-stack">
                <div class="log-entry theme-spire" onclick="toggle(this)">
                    <div class="log-header">
                        <div><span style="color:#555; font-size:0.7rem; margin-right:10px;">ID: 01</span><span style="color:#ddd; font-weight:bold;">METRIC VARIABLE</span></div>
                        <span style="color:var(--neon-teal)">+</span>
                    </div>
                    <div class="log-body"><div class="log-content">I carry a 3kg lead sphere. It surges upward. This is a localized METRIC SHIFT. Threads of neon-green melon juice trace invisible stress lines.</div></div>
                </div>

                <div class="log-entry theme-market" onclick="toggle(this)">
                    <div class="log-header">
                        <div><span style="color:#555; font-size:0.7rem; margin-right:10px;">ID: 02</span><span style="color:#ddd; font-weight:bold;">THERMODYNAMIC STRESS</span></div>
                        <span style="color:#ea580c">+</span>
                    </div>
                    <div class="log-body"><div class="log-content">High-tensile architecture screams. Lead blocks weep grey metallic sludge. Through the crimson haze, I see the water vortex screaming into steam.</div></div>
                </div>

                <div class="log-entry theme-obs" onclick="toggle(this)">
                    <div class="log-header">
                        <div><span style="color:#555; font-size:0.7rem; margin-right:10px;">ID: 04</span><span style="color:#ddd; font-weight:bold;">VECTOR CRISIS</span></div>
                        <span style="color:#8b5cf6">+</span>
                    </div>
                    <div class="log-body"><div class="log-content">Down ceases to exist. The lead sphere undergoes "dimensional shearing," stretching into a needle. A bio-mimetic crow with a glowing red iris watches.</div></div>
                </div>
            </div>
        </main>
    </div>

    <footer>
        <div>ALDERSYTH_OS v4.0.2</div>
        <div><a href="login.html" style="color:#444; text-decoration:none;">ADMIN_LOGIN</a></div>
    </footer>

    <div class="breach-ui">
        <h1 class="mega-title">BREACH DETECTED</h1>
        <div style="color:var(--neon-gold); letter-spacing:5px; margin-bottom:40px;">REALITY ANCHOR FAILURE</div>
        <a href="backdoor.html" class="breach-btn">INITIATE_BACKDOOR</a>
    </div>

    <script>
        // --- 1. REAL DATA APIS ---
        function initRealData() {
            // Clock
            setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString(), 1000);
            
            // Bitcoin
            fetch('https://api.coindesk.com/v1/bpi/currentprice.json')
                .then(r => r.json())
                .then(d => document.getElementById('btc-val').innerText = "$" + Math.floor(d.bpi.USD.rate_float))
                .catch(() => document.getElementById('btc-val').innerText = "OFFLINE");

            // Battery
            if(navigator.getBattery) {
                navigator.getBattery().then(b => {
                    document.getElementById('batt-val').innerText = Math.floor(b.level * 100) + "%";
                });
            }

            // Network
            if(navigator.connection) {
                document.getElementById('net-val').innerText = navigator.connection.downlink + " Mbps";
            }
        }
        initRealData();

        // --- 2. 3D SPHERE SETUP (CLEAN GEOMETRY, NO BLOB) ---
        const canvas = document.getElementById('three-canvas');
        const renderer = new THREE.WebGLRenderer({canvas, alpha:true});
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
        camera.position.z = 2.5;

        // TIGHTER GEOMETRY (Standard Icosahedron + slight distortion)
        const geo = new THREE.IcosahedronGeometry(1, 2); 
        const mat = new THREE.MeshBasicMaterial({ 
            color: 0x2dd4bf, // Start Teal
            wireframe: true, 
            transparent: true, 
            opacity: 0.4
        });
        const sphere = new THREE.Mesh(geo, mat);
        scene.add(sphere);

        // INNER CORE (To make it look solid but digital)
        const coreGeo = new THREE.IcosahedronGeometry(0.6, 1);
        const coreMat = new THREE.MeshBasicMaterial({ color: 0x000000 });
        const core = new THREE.Mesh(coreGeo, coreMat);
        scene.add(core);

        function resize() {
            const cont = document.getElementById('viz-container');
            renderer.setSize(cont.clientWidth, cont.clientHeight);
            camera.aspect = cont.clientWidth / cont.clientHeight;
            camera.updateProjectionMatrix();
        }
        window.addEventListener('resize', resize);
        resize();

        let chaos = 0;
        function animate() {
            requestAnimationFrame(animate);
            const time = Date.now() * 0.001;
            
            // CLEAN ROTATION
            sphere.rotation.y += 0.005 + (chaos * 0.05);
            sphere.rotation.z += 0.002;
            
            // PULSE (Not Blob)
            const scale = 1 + Math.sin(time * 2) * 0.05;
            sphere.scale.set(scale, scale, scale);
            
            // COLOR SHIFT ON BREACH
            if(chaos > 0.5) mat.color.setHex(0xef4444); // Turn red
            else mat.color.setHex(0x2dd4bf); // Teal

            renderer.render(scene, camera);
        }
        animate();

        // --- 3. BREACH LOGIC ---
        function triggerBreach() {
            document.body.classList.add('breach-active');
            let ramp = setInterval(() => {
                chaos += 0.05;
                if(chaos > 1.5) clearInterval(ramp);
            }, 100);
        }

        // --- 4. UI UTILS ---
        function toggle(el) {
            el.classList.toggle('active');
        }

        // CPU BARS SIMULATION
        const cpu = document.getElementById('cpu-graph');
        for(let i=0; i<20; i++) {
            let d = document.createElement('div');
            d.className = 'bar';
            cpu.appendChild(d);
        }
        setInterval(() => {
            document.querySelectorAll('.bar').forEach(b => b.style.height = Math.random()*100 + "%");
        }, 100);

    </script>
</body>
</html>

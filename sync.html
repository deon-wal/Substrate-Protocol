<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ALDERSYTH // OBSERVATORY_VECTOR</title>
<style>
:root { --gold: #ffb000; --cyan: #06b6d4; --red: #ff3e3e; --bg: #01080a; }
body { 
    background: var(--bg) url('wallpaper.jpg.png') center/cover no-repeat fixed;
    color: var(--cyan); font-family: 'Courier New', monospace; margin: 0; overflow: hidden; height: 100vh;
}

/* THE ORIGAMI FOLD EFFECT */
.fold-layer {
    position: absolute; inset: 0; pointer-events: none;
    background: linear-gradient(45deg, transparent 48%, var(--cyan) 50%, transparent 52%);
    background-size: 200% 200%; opacity: 0.1;
    animation: foldShift 10s ease-in-out infinite alternate;
}
@keyframes foldShift { from { transform: skewX(-5deg) scale(1); } to { transform: skewX(5deg) scale(1.05); } }

.container { display: grid; grid-template-columns: 1fr 300px; height: 100vh; backdrop-filter: brightness(0.5) blur(15px); }

/* THE DE-REZZING LOG */
#vector-log {
    padding: 40px; font-size: 0.85rem; line-height: 1.6; max-width: 700px;
    position: relative; z-index: 10;
}
.de-rez { transition: opacity 2s, filter 2s; display: inline-block; margin-right: 4px; }
.faded { opacity: 0; filter: blur(10px); }

/* HUD COMPONENTS */
aside { border-left: 1px solid var(--cyan); background: rgba(0,0,0,0.8); padding: 20px; display: flex; flex-direction: column; }
.hud-item { border: 1px solid var(--cyan); padding: 15px; margin-bottom: 20px; position: relative; }
.warning { color: var(--red); font-size: 0.6rem; animation: blink 0.5s infinite; }
@keyframes blink { 50% { opacity: 0; } }

/* VECTOR VISUALIZER */
#vector-canvas { position: absolute; inset: 0; z-index: 1; opacity: 0.4; }

button { background: none; border: 1px solid var(--gold); color: var(--gold); padding: 12px; cursor: pointer; font-family: inherit; margin-top: auto; }
button:hover { background: var(--gold); color: #000; }
</style>
</head>
<body>

<div class="fold-layer"></div>
<canvas id="vector-canvas"></canvas>

<div class="container">
    <main id="vector-log">
        <h2 style="color:var(--gold); border-bottom: 1px solid var(--gold); padding-bottom: 10px;">LOG_04 // VECTOR_CRISIS</h2>
        <div id="story-text"></div>
    </main>

    <aside>
        <div class="hud-item">
            <span class="warning">!! HIGGS_DECOHERENCE !!</span>
            <div style="font-size: 1.2rem; font-weight: bold;" id="wind-live">-- MPH</div>
            <div style="font-size: 0.5rem; opacity: 0.7;">LOCAL_KINETIC_SURGE (RICHMOND)</div>
        </div>

        <div class="hud-item" style="flex-grow: 1;">
            <p style="font-size: 0.6rem; color: var(--gold);">"Telemetry is a delusion of control. Interpret the variables with your biology, or the city will erase the anomaly."</p>
            <div style="margin-top: 20px; font-size: 0.6rem;">
                MARKET_TETHER: <span id="btc-val">$---</span>
            </div>
        </div>

        <button onclick="location.href='index.html'">RE-SYNC_CORE</button>
    </aside>
</div>

<script>
/* 1. The Story (Fading away word by word) */
const story = "Midnight brought total Higgs-decoherence. The air smelled of scorched copper and ozone. The kinetic surge hit—not a breeze, but a vacuum. It ripped the notebook from my hand. I lunged for it, but a gravity flip sent it spiraling upward, its pages fluttering like the wings of a dying bird. Without the data, I was blind. The city began to fold like origami. Buildings leaned at impossible 45-degree angles. Sloane’s voice crackled: 'Data is a crutch, Analyst.' I followed a calibration orb through a shimmering refraction aperture, my body feeling the sickening stretch of quantum tunneling.";

const storyContainer = document.getElementById('story-text');

// Initialize story words
story.split(" ").forEach(word => {
    const span = document.createElement('span');
    span.className = 'de-rez';
    span.innerText = word;
    storyContainer.appendChild(span);
});

// De-rez logic: Randomly fade words over time
setInterval(() => {
    const spans = document.querySelectorAll('.de-rez:not(.faded)');
    if (spans.length > 0) {
        const target = spans[Math.floor(Math.random() * spans.length)];
        target.classList.add('faded');
    }
}, 800);

/* 2. Live Telemetry (Richmond Wind & BTC) */
async function getTelemetry() {
    try {
        const weather = await fetch('https://wttr.in/Richmond?format=j1').then(r => r.json());
        document.getElementById('wind-live').innerText = weather.current_condition[0].windspeedMiles + " MPH";
        
        const btc = await fetch('https://api.coindesk.com/v1/bpi/currentprice.json').then(r => r.json());
        document.getElementById('btc-val').innerText = "$" + Math.floor(btc.bpi.USD.rate_float).toLocaleString();
    } catch(e) {}
}
getTelemetry();

/* 3. Vector Canvas (The fluttering pages) */
const canvas = document.getElementById('vector-canvas');
const ctx = canvas.getContext('2d');
function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.onresize = resize; resize();

let particles = [];
for(let i=0; i<15; i++) {
    particles.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, vx: 2, vy: -2 });
}

function draw() {
    ctx.clearRect(0,0,canvas.width, canvas.height);
    ctx.strokeStyle = '#06b6d4';
    particles.forEach(p => {
        ctx.strokeRect(p.x, p.y, 10, 14); // "Pages" of the notebook
        p.x += p.vx + Math.sin(Date.now()/500);
        p.y += p.vy;
        if(p.y < -20) p.y = canvas.height + 20;
        if(p.x > canvas.width) p.x = -20;
    });
    requestAnimationFrame(draw);
}
draw();
</script>
</body>
</html>

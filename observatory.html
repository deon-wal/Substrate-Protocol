<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALDERSYTH // OBS_V4_PROTOTYPE</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #030305;
            --panel: rgba(10, 10, 15, 0.9);
            --border: #2a2a35;
            --violet: #8b5cf6;
            --crimson: #ff3333;
            --cyan: #00f2ff;
            --gold: #ffcc00;
        }

        * { box-sizing: border-box; cursor: crosshair; }

        body {
            background-color: var(--bg);
            color: var(--violet);
            font-family: 'Share Tech Mono', monospace;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            text-transform: uppercase;
        }

        /* CRT EFFECT OVERLAY */
        body::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            z-index: 1000;
            background-size: 100% 3px, 3px 100%;
            pointer-events: none;
        }

        /* HEADER */
        header {
            height: 50px;
            background: #000;
            border-bottom: 2px solid var(--violet);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);
            z-index: 100;
        }

        .nav a { color: #555; text-decoration: none; margin-left: 20px; font-size: 0.75rem; transition: 0.2s; }
        .nav a:hover, .nav a.active { color: var(--cyan); text-shadow: 0 0 10px var(--cyan); }

        /* SCROLLABLE KINETIC VIEWPORT */
        .viewport {
            flex: 1;
            display: grid;
            grid-template-columns: 320px 1fr 320px;
            gap: 2px;
            background: var(--border);
            overflow-y: auto;
            padding-bottom: 120px; /* Room for fixed sliders */
        }

        .panel { 
            background: var(--panel); 
            padding: 25px; 
            border: 1px solid transparent; 
            transition: 0.1s;
        }

        /* LENS SYSTEM */
        .lens-cell {
            background: #000;
            height: 280px;
            margin-bottom: 2px;
            position: relative;
            border-bottom: 1px solid var(--border);
        }
        canvas { width: 100%; height: 100%; }
        
        .lens-label {
            position: absolute; top: 10px; left: 15px; font-size: 0.6rem; 
            color: var(--cyan); letter-spacing: 2px; background: #000; padding: 2px 6px;
        }

        /* DATA READOUTS */
        .big-data { font-size: 2rem; color: #fff; font-weight: bold; margin-bottom: 10px; }
        .label { font-size: 0.6rem; color: var(--gold); letter-spacing: 1px; }

        /* FIXED FOOTER CONTROLS */
        .footer-deck {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 110px;
            background: #000;
            border-top: 2px solid var(--violet);
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            padding: 10px 40px;
            z-index: 110;
        }

        .slider-wrap { padding: 0 20px; }
        input[type=range] {
            width: 100%;
            appearance: none;
            background: #111;
            height: 4px;
            outline: none;
            accent-color: var(--cyan);
        }

        /* SCREEN GLITCH ANIMATION */
        @keyframes shake {
            0% { transform: translate(0,0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0,0); }
        }
        .glitch-active { animation: shake 0.1s infinite; filter: hue-rotate(90deg); }

    </style>
</head>
<body id="main-body">

    <header>
        <div style="letter-spacing:4px; font-weight: 900;">ALDERSYTH // <span style="color:var(--cyan)">OBSERVATORY</span></div>
        <nav class="nav">
            <a href="#">SYSTEM</a>
            <a href="#">ARCHIVE</a>
            <a href="#" class="active">SCANNER</a>
            <a href="#" style="color:var(--crimson)">BYPASS_ROOT</a>
        </nav>
    </header>

    <div class="viewport" id="vport">
        <aside class="panel">
            <div class="label">PITCH_RESONANCE</div>
            <div class="big-data" id="val-freq">0.0</div>
            
            <div class="label">SIGNAL_STRENGTH</div>
            <div class="big-data" id="val-amp" style="color:var(--cyan)">0%</div>

            <div style="margin-top:40px; border: 1px solid var(--border); padding: 10px;">
                <div class="label">NEURAL_LOAD</div>
                <div id="load-bar" style="height:4px; background:var(--violet); width: 40%; transition: 0.3s;"></div>
            </div>
            
            <div style="margin-top:100px; opacity:0.3; font-size:0.5rem;">
                [!] WARNING: Prolonged exposure to sub-harmonic frequencies may cause temporary temporal displacement.
            </div>
        </aside>

        <main style="background: var(--border);">
            <div class="lens-cell">
                <span class="lens-label">LENS_01 // SPECTRAL_ANALYSIS</span>
                <canvas id="c1"></canvas>
            </div>
            <div class="lens-cell">
                <span class="lens-label">LENS_02 // KINETIC_ENVELOPE</span>
                <canvas id="c2"></canvas>
            </div>
            <div class="lens-cell">
                <span class="lens-label">LENS_03 // BIT_FRAGMENTATION</span>
                <canvas id="c3"></canvas>
            </div>
            
            <div class="panel" style="min-height: 400px; color:#444; font-size:0.8rem; line-height:2;">
                <span style="color:var(--gold)">// SYSTEM_LOG_EXTENDED</span><br>
                [14:02] INITIALIZING SCAN...<br>
                [14:02] TARGET VECTOR: 42.0.60.25<br>
                [14:03] DECODING MEMORY FRAGMENT FROM DEON_WAL_REPRO...<br>
                <br>
                Searching for the ghost in the machine. You must align the purple wave with the red shadow. 
                When the harmonics match, the observatory will stabilize. 
                Scroll down to see the real-time buffer status below.
                <br><br>
                [BUFFER_STATUS: 92%]<br>
                [INTERFERENCE: HIGH]<br>
                [RESONANCE: PENDING]
            </div>
        </main>

        <aside class="panel">
            <div class="label">DECRYPTED_OUTPUT</div>
            <div id="output-text" style="color:#555; margin-top:20px; font-size:0.9rem;">
                [SIGNAL_LOST]<br>---<br>AWAITING INPUT...
            </div>
            
            <div id="visual-glitch" style="margin-top:50px; width:100%; height:150px; background:#050505; border:1px solid #1a1a1a; display:flex; align-items:center; justify-content:center; color:#111;">
                NO_VISUAL
            </div>
        </aside>
    </div>

    <div class="footer-deck">
        <div class="slider-wrap">
            <div class="label">FREQUENCY</div>
            <input type="range" id="f_in" min="10" max="100" value="20">
        </div>
        <div class="slider-wrap">
            <div class="label">AMPLITUDE</div>
            <input type="range" id="a_in" min="1" max="100" value="10">
        </div>
        <div class="slider-wrap">
            <div class="label">PHASE_SHIFT</div>
            <input type="range" id="p_in" min="1" max="100" value="50">
        </div>
    </div>

    <script>
        const ctxs = [
            document.getElementById('c1').getContext('2d'),
            document.getElementById('c2').getContext('2d'),
            document.getElementById('c3').getContext('2d')
        ];
        
        let t = 0;
        const target = { f: 42, a: 60, p: 25 };

        function res() {
            ctxs.forEach(ctx => {
                ctx.canvas.width = ctx.canvas.parentElement.offsetWidth;
                ctx.canvas.height = ctx.canvas.parentElement.offsetHeight;
            });
        }
        window.onresize = res;
        res();

        function draw() {
            t += 0.1;
            const f = parseInt(document.getElementById('f_in').value);
            const a = parseInt(document.getElementById('a_in').value);
            const p = parseInt(document.getElementById('p_in').value);

            // Update Text
            document.getElementById('val-freq').innerText = (f * 12.5).toFixed(1) + "Hz";
            document.getElementById('val-amp').innerText = a + "%";
            document.getElementById('load-bar').style.width = f + "%";

            // Match Logic & Effects
            const isClose = Math.abs(f - target.f) < 8 && Math.abs(a - target.a) < 10;
            const isPerfect = Math.abs(f - target.f) < 3 && Math.abs(a - target.a) < 4;

            if(isClose) {
                document.getElementById('vport').classList.add('glitch-active');
                document.getElementById('output-text').innerText = "[SIGNAL_FOUND] // STABILIZING...";
                document.getElementById('output-text').style.color = "var(--cyan)";
            } else {
                document.getElementById('vport').classList.remove('glitch-active');
                document.getElementById('output-text').style.color = "#555";
                document.getElementById('output-text').innerText = "[SIGNAL_LOST]";
            }

            ctxs.forEach((ctx, i) => {
                const w = ctx.canvas.width;
                const h = ctx.canvas.height;
                ctx.clearRect(0,0,w,h);
                
                // Grid
                ctx.strokeStyle = "#0a0a0c";
                for(let x=0; x<w; x+=30) { ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,h); ctx.stroke(); }
                
                // Red Ghost
                renderWave(ctx, w, h, target.f, target.a, target.p, "rgba(255,0,0,0.1)", 1);
                // User Wave
                renderWave(ctx, w, h, f, a, p, (isPerfect ? "var(--cyan)" : "var(--violet)"), 2);
            });

            requestAnimationFrame(draw);
        }

        function renderWave(ctx, w, h, f, a, p, col, lw) {
            ctx.beginPath();
            ctx.strokeStyle = col;
            ctx.lineWidth = lw;
            for(let x=0; x<w; x++) {
                let y = h/2 + Math.sin(x * f * 0.005 + p * 0.1 + t) * (a * 1.5);
                if(x===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
            }
            ctx.stroke();
        }

        draw();
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALDERSYTH // OBSERVATORY_BRUTAL_MASTER</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050505;
            --lead: #1a1a1a;
            --violet: #8b5cf6;
            --crimson: #ef4444;
            --green: #39ff14; 
            --gold: #d4af37;
        }

        /* BRUTAL CUSTOM SCROLLBAR */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--lead); border: 1px solid #333; }
        ::-webkit-scrollbar-thumb:hover { background: var(--violet); }

        body {
            background-color: var(--bg); color: var(--violet);
            font-family: 'Share Tech Mono', monospace; margin: 0;
            height: 100vh; overflow: hidden; display: flex; flex-direction: column;
            background-image: url('wallpaper.jpg.png'); background-size: cover;
            background-blend-mode: overlay;
            perspective: 1000px;
        }

        /* DYNAMIC CRT SCANLINES */
        body::after {
            content: ""; position: fixed; inset: 0; z-index: 9999;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.2) 50%);
            background-size: 100% 4px; pointer-events: none; opacity: 0.4;
        }

        header {
            height: 60px; background: rgba(0,0,0,0.9); border-bottom: 2px solid #222;
            display: flex; justify-content: space-between; align-items: center; padding: 0 40px;
            z-index: 100;
        }
        .nav a { color: #444; text-decoration: none; margin-left: 20px; font-size: 0.8rem; letter-spacing: 2px; transition: 0.3s; }
        .nav a:hover, .nav a.active { color: var(--violet); text-shadow: 0 0 8px var(--violet); }

        /* HUD GRID */
        .viewport {
            flex: 1; display: grid; grid-template-columns: 320px 1fr 340px;
            background: #111; gap: 2px; transform-style: preserve-3d;
            transition: transform 0.1s ease-out;
        }

        .panel { background: var(--bg); padding: 25px; display: flex; flex-direction: column; border: 1px solid #111; backdrop-filter: blur(5px); }

        /* THE LENS (CENTER) */
        .scope-container {
            position: relative; background: #000;
            overflow: hidden; cursor: crosshair;
        }
        #signal-canvas { width: 100%; height: 100%; filter: contrast(1.5) brightness(1.2); }

        /* ASSET: THE ENTITY (The Green Blob) */
        #entity-layer {
            position: absolute; inset: 0;
            background: url('image_3c0f45.jpg') no-repeat center;
            background-size: 40%; opacity: 0; filter: blur(30px) hue-rotate(90deg) contrast(2);
            transition: opacity 0.5s, filter 0.8s; pointer-events: none;
        }

        .scope-hud { position: absolute; top: 30px; left: 30px; pointer-events: none; }
        .status-header { font-size: 3.5rem; font-weight: 900; color: var(--crimson); line-height: 1; letter-spacing: -2px; }

        /* ASSET: SEISMIC READOUT (pin3.jpg.png) */
        #seismic-stress-view {
            flex: 1; margin-top: 15px; border: 1px solid #222;
            background: url('pin3.jpg.png') repeat-x; background-size: cover;
            opacity: 0.2; filter: hue-rotate(280deg) contrast(1.5);
        }

        /* ASSET: DECRYPTED MEMORY (log4.jpg) */
        #memory-visual {
            width: 100%; height: 220px; border: 1px solid #333;
            background: url('log4.jpg') no-repeat center; background-size: cover;
            filter: brightness(0) blur(20px); transition: 2s ease; margin-bottom: 20px;
        }
        #memory-visual.decrypted { filter: brightness(0.8) blur(0px); box-shadow: 0 0 30px var(--violet); }

        /* CONTROLS */
        .control-deck {
            background: #000; border-top: 2px solid #222; padding: 30px 40px;
            display: flex; gap: 40px; justify-content: center; z-index: 100;
        }
        .slider-group { flex: 1; max-width: 280px; }
        .label { font-size: 0.65rem; color: var(--gold); display: block; margin-bottom: 10px; letter-spacing: 2px; }
        input[type=range] { width: 100%; accent-color: var(--violet); background: #111; height: 3px; outline: none; }

        /* VIOLENT SHAKE ANIMATION */
        .violent-shake { animation: shake 0.1s infinite; }
        @keyframes shake {
            0% { transform: translate(1px, 1px); }
            50% { transform: translate(-2px, -2px); }
            100% { transform: translate(1px, 1px); }
        }
    </style>
</head>
<body id="master-os">

    <header>
        <div style="font-weight:bold; letter-spacing:5px;">ALDERSYTH // OBSERVATORY</div>
        <nav class="nav">
            <a href="index.html">HUB</a>
            <a href="market.html">MARKET</a>
            <a href="spire.html">SPIRE</a>
            <a href="observatory.html" class="active">OBSERVATORY</a>
            <a href="login.html" style="color:var(--crimson)">_ROOT</a>
        </nav>
    </header>

    <div class="viewport" id="hud">
        <aside class="panel">
            <div style="color:var(--gold); font-size: 0.75rem; border-bottom:1px solid #222; padding-bottom:10px; margin-bottom: 20px;">[ SPECTRAL_TELEMETRY ]</div>
            
            <span class="label">PULSE_STRENGTH</span>
            <div style="height:3px; background:#111; margin-bottom:20px;">
                <div id="amp-bar" style="height:100%; width:0%; background:var(--violet); box-shadow: 0 0 10px var(--violet);"></div>
            </div>

            <span class="label">THERMODYNAMIC_STRESS</span>
            <div id="seismic-stress-view"></div>
            
            <div style="font-size:0.65rem; color:#444; margin-top:15px; line-height: 1.8;">
                > SCANNING: SECTOR_7<br>
                > FREQ_SHIFT: <span id="val-f">000.00</span><br>
                > SYNC_STATUS: <span id="sync-stat" style="color:var(--crimson)">SEARCHING...</span>
            </div>
        </aside>

        <main class="scope-container">
            <div id="entity-layer"></div>
            <canvas id="signal-canvas"></canvas>
            <div class="scope-hud">
                <div id="status-txt" class="status-header">SEARCHING...</div>
                <div style="color:#222; font-size:0.65rem; letter-spacing:5px; margin-top:10px;">ALIGN VECTORS TO RESOLVE ENTITY</div>
            </div>
        </main>

        <aside class="panel">
            <div style="color:var(--gold); font-size: 0.75rem; border-bottom:1px solid #222; padding-bottom:10px; margin-bottom: 20px;">[ DECRYPTED_LOG ]</div>
            
            <div id="memory-visual"></div>
            
            <div id="log-screen" style="font-size: 0.75rem; color: #333; line-height: 1.6;">
                [ENCRYPTED_SIGNAL]
                ---
                MATCH VECTORS:
                1. FREQ_RESONANCE
                2. THERMODYNAMIC_AMP
                3. PHASE_DRIFT
                ---
                STATUS: AWAITING_LOCK
            </div>
        </aside>
    </div>

    <div class="control-deck">
        <div class="slider-group">
            <span class="label">FREQ_RESONANCE</span>
            <input type="range" id="freq" min="10" max="100" value="20">
        </div>
        <div class="slider-group">
            <span class="label">THERMODYNAMIC_AMP</span>
            <input type="range" id="amp" min="1" max="100" value="10">
        </div>
        <div class="slider-group">
            <span class="label">PHASE_DRIFT</span>
            <input type="range" id="phase" min="1" max="100" value="80">
        </div>
    </div>

    <script>
        const canvas = document.getElementById('signal-canvas');
        const ctx = canvas.getContext('2d');
        const hud = document.getElementById('hud');
        const entity = document.getElementById('entity-layer');
        let time = 0, lockTimer = 0;
        
        // Narrative Lock Coordinates
        let target = { f: 42, a: 60, p: 25 };

        // HUD PARALLAX
        document.addEventListener('mousemove', (e) => {
            const x = (window.innerWidth / 2 - e.pageX) / 50;
            const y = (window.innerHeight / 2 - e.pageY) / 50;
            hud.style.transform = `rotateY(${x}deg) rotateX(${-y}deg)`;
        });

        function loop() {
            requestAnimationFrame(loop);
            ctx.clearRect(0,0,canvas.width, canvas.height);
            time += 0.2;

            const f = parseInt(document.getElementById('freq').value);
            const a = parseInt(document.getElementById('amp').value);
            const p = parseInt(document.getElementById('phase').value);

            // Brutal Shake Feedback
            if(a > 50) document.body.classList.add('violent-shake');
            else document.body.classList.remove('violent-shake');

            // Telemetry Update
            document.getElementById('amp-bar').style.width = a + "%";
            document.getElementById('val-f').innerText = (f * 12.5).toFixed(2);
            document.getElementById('seismic-stress-view').style.backgroundPositionX = (time * 10) + "px";

            // Draw Waves
            drawWave(target.f, target.a, target.p, "rgba(255, 0, 0, 0.1)", 1); // Ghost
            drawWave(f, a, p, "#8b5cf6", 3); // User Signal

            // Sync Verification
            const match = Math.abs(f - target.f) < 4 && Math.abs(a - target.a) < 8 && Math.abs(p - target.p) < 8;
            const log = document.getElementById('log-screen');
            const status = document.getElementById('status-txt');
            const visual = document.getElementById('memory-visual');

            if(match) {
                lockTimer++;
                if(lockTimer > 50) {
                    status.innerText = "VECTOR_SYNCED"; status.style.color = "var(--green)";
                    entity.style.opacity = (a / 120);
                    entity.style.filter = `blur(${15 - (a/8)}px) hue-rotate(0deg) contrast(2)`;
                    visual.classList.add('decrypted');
                    log.style.color = "var(--green)";
                    log.innerHTML = `[ ORIGIN_RECOVERED ]<br>---<br>"They are mining MEMORIES. Building a bridge out of our discarded lives."`;
                }
            } else {
                lockTimer = 0;
                status.innerText = "SEARCHING..."; status.style.color = "var(--crimson)";
                entity.style.opacity = "0";
                visual.classList.remove('decrypted');
                log.style.color = "#333";
                log.innerText = "[ENCRYPTED_SIGNAL] --- ALIGN VECTORS TO RESOLVE MEMORY.";
            }
        }

        function drawWave(f, a, p, color, width) {
            ctx.beginPath(); ctx.strokeStyle = color; ctx.lineWidth = width;
            let cy = canvas.height / 2;
            for(let x=0; x<canvas.width; x++) {
                let y = cy + Math.sin(x * f * 0.003 + p * 0.1 + time) * (a * 2.8);
                if(x===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
            }
            ctx.stroke();
        }

        window.addEventListener('resize', () => {
            canvas.width = canvas.parentElement.offsetWidth;
            canvas.height = canvas.parentElement.offsetHeight;
        });
        canvas.width = canvas.parentElement.offsetWidth;
        canvas.height = canvas.parentElement.offsetHeight;
        loop();
    </script>
</body>
</html>
